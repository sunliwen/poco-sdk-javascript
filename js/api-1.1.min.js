(function(d){function c(i){var h=document.createElement("script");h.src=i;h.charset="utf-8";h.async=true;var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(h,j)}function e(h,i){this.shared_params={};this.requests=[];this.api_key=h;if(i===undefined||i===null){this.url_prefix="http://api.tuijianbao.net/1.0"}else{this.url_prefix=i}}e.prototype.addSharedParams=function(h,i){this.shared_params["##"+h]=i};e.prototype.addRequest=function(i,h){this.requests.push([i,h])};var f={"rateItem:item_id":"ri_i","rateItem:score":"ri_s","rateItem:user_id":"ri_u","updateItem:categories":"upic","updateItem:description":"upid","updateItem:item_id":"upii","updateItem:image_link":"upim","updateItem:item_link":"upil","updateItem:item_name":"upin","updateItem:price":"upip","updateItem:market_price":"upir","getBoughtTogether:amount":"rcta","getBoughtTogether:include_item_info":"rctc","getBoughtTogether:item_id":"rcti","getBoughtTogether:user_id":"rctu","getUltimatelyBought:amount":"rcua","getUltimatelyBought:include_item_info":"rcuc","getUltimatelyBought:item_id":"rcui","getUltimatelyBought:user_id":"rcuu","getAlsoViewed:amount":"rcva","getAlsoViewed:include_item_info":"rcvc","getAlsoViewed:item_id":"rcvi","getAlsoViewed:user_id":"rcvu","removeFavorite:item_id":"rf_i","removeFavorite:user_id":"rf_u","getByShoppingCart:amount":"rcca","getByShoppingCart:include_item_info":"rccc","getByShoppingCart:shopping_cart":"rccs","getByShoppingCart:user_id":"rccu","removeOrderItem:item_id":"rsci","removeOrderItem:user_id":"rscu","addOrderItem:item_id":"asci","addOrderItem:user_id":"ascu","addFavorite:item_id":"af_i","addFavorite:user_id":"af_u","getByBrowsingHistory:amount":"rcha","getByBrowsingHistory:include_item_info":"rchc","getByBrowsingHistory:browsing_history":"rchh","getByBrowsingHistory:user_id":"rchu","placeOrder:user_id":"plou","placeOrder:order_content":"ploo","removeItem:item_id":"rmii","viewItem:item_id":"vi_i","viewItem:user_id":"vi_u","getAlsoBought:amount":"rcba","getAlsoBought:include_item_info":"rcbc","getAlsoBought:item_id":"rcbi","getAlsoBought:user_id":"rcbu","getByPurchasingHistory:amount":"rcpa","getByPurchasingHistory:include_item_info":"rcpc","getByPurchasingHistory:user_id":"rcpu"};var g={rateItem:8,updateItem:128,getBoughtTogether:2048,getUltimatelyBought:4096,getAlsoViewed:512,removeFavorite:4,getByShoppingCart:32768,removeOrderItem:32,addOrderItem:16,addFavorite:2,getByBrowsingHistory:8192,placeOrder:64,removeItem:256,viewItem:1,getAlsoBought:1024,getByPurchasingHistory:16384};var a={user_id:1,description:1,item_name:1,price:1,order_content:1,amount:1,image_link:1,include_item_info:1,market_price:1,score:1,item_id:1,item_link:1,browsing_history:1,shopping_cart:1,categories:1};e.prototype.getUrlArgs=function(p){var j={"##api_key":this.api_key,"##callback":p};var i=0;for(var n in this.requests){var m=this.requests[n][0];var k=this.requests[n][1];for(var o in k){var l=m+":"+o;if(l in f){var h=f[l];j["##"+h]=k[o]}else{}}i=i|g[m]}for(var o in this.shared_params){if(o.substring(0,2)=="##"){j["##_"+o.substring(2)]=this.shared_params[o]}}j["##-"]=i.toString(16);return j};e.prototype.getFullUrl=function(k){var i=this.getUrlArgs(k);var j="";for(var h in i){if(h.substring(0,2)=="##"){j+="&"+h.substring(2)+"="+encodeURIComponent(i[h])}}return this.url_prefix+"/packedRequest?"+j};e.prototype.invoke=function(i){var h=this.getFullUrl(i);c(h+"&"+new Date().getTime())};var b=new Object();b.PackedRequest=e;d.tui=b})(window);